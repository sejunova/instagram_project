{% extends 'base.html' %}
<!--Template language의 for구문을 사용해서 각 Post의 photo항목을 출력-->
<!--.photo속성의 'url'속성을 사용해서 img태그를 사용 실제 이미지를 보여주기-->

<!--1. 사진 업로드하기-->
<!--2. 사진에 댓글달기-->
<!--extra1) urls.py모듈을 post애플리케이션 내부에 생성하고,
						include를 이용해서 root urls.py모듈에서 사용-->
<!--extra2) 사진 댓글 지우기, 사진 지우기-->

{% block content %}
<div>
	{% for post in posts %}
	<div id="post-{{ post.pk }}" class="panel panel-default post">
		<div class="panel-heading">{{ post.author.username}}</div>
		<div class="panel-body">
			<a href="{% url 'post:post_detail' post_pk=post.pk %}">
				<img src="{{ post.photo.url }}" class="img-post">
			</a>
			<div class="body-content">
				<ul id="post-comments-{{ post.pk }}">
					{% for comment in post.comments.all %}
					<li>{{ comment.content }}</li>
					{% endfor %}
				</ul>
				<form
					action="{% url 'post:comment_create' post_pk=post.pk %}?next=/post/#post-comments-{{ post.pk }}"
					method="POST">
					{% csrf_token %}
					{{ comment_form.content }}
					<button class="btn-primary btn">댓글달기</button>
				</form>
			</div>
		</div>
	</div>
	{% endfor %}
</div>
{% endblock %}